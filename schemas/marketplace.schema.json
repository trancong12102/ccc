{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://anthropic.com/claude-code/marketplace.schema.json",
  "title": "Claude Code Plugin Marketplace",
  "description": "Schema for Claude Code plugin marketplace configuration",
  "type": "object",
  "required": ["$schema", "name", "description", "owner", "plugins"],
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference URL"
    },
    "name": {
      "type": "string",
      "pattern": "^[a-z][a-z0-9-]*$",
      "description": "Unique marketplace identifier (lowercase, alphanumeric with hyphens)"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "maxLength": 500,
      "description": "Human-readable marketplace description"
    },
    "owner": {
      "$ref": "#/definitions/Owner"
    },
    "plugins": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Plugin"
      },
      "minItems": 1,
      "description": "List of plugins available in this marketplace"
    }
  },
  "definitions": {
    "Owner": {
      "type": "object",
      "required": ["name", "email"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Owner name (person or organization)"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Contact email address"
        }
      }
    },
    "Author": {
      "type": "object",
      "required": ["name"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Author name"
        },
        "email": {
          "type": "string",
          "format": "email",
          "description": "Author email (optional)"
        }
      }
    },
    "Plugin": {
      "type": "object",
      "required": ["name", "description", "version", "source"],
      "properties": {
        "name": {
          "type": "string",
          "pattern": "^[a-z][a-z0-9-]*$",
          "description": "Unique plugin identifier"
        },
        "description": {
          "type": "string",
          "minLength": 10,
          "maxLength": 500,
          "description": "Human-readable plugin description"
        },
        "version": {
          "type": "string",
          "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",
          "description": "Semantic version (e.g., 1.0.0, 0.1.0-beta)"
        },
        "source": {
          "type": "string",
          "description": "Relative path to plugin directory"
        },
        "author": {
          "$ref": "#/definitions/Author"
        },
        "category": {
          "type": "string",
          "enum": ["development", "productivity", "utilities", "documentation", "testing", "security", "devops", "data"],
          "description": "Plugin category for discovery"
        },
        "homepage": {
          "type": "string",
          "format": "uri",
          "description": "Project homepage URL"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^[a-z][a-z0-9-]*$"
          },
          "description": "Searchable keywords"
        },
        "lspServers": {
          "type": "object",
          "description": "Inline LSP server configuration",
          "additionalProperties": {
            "$ref": "#/definitions/LSPServer"
          }
        }
      }
    },
    "LSPServer": {
      "type": "object",
      "required": ["command", "extensionToLanguage"],
      "properties": {
        "command": {
          "type": "string",
          "description": "Command to start the LSP server"
        },
        "args": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Command line arguments"
        },
        "extensionToLanguage": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "description": "File extension to language ID mapping"
        },
        "startupTimeout": {
          "type": "integer",
          "minimum": 1000,
          "maximum": 300000,
          "description": "Server startup timeout in milliseconds"
        }
      }
    }
  }
}
